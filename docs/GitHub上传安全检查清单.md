# GitHub 上传安全检查清单

## 📋 概述

本文档帮助您检查上传到 GitHub 的代码是否安全，确保没有泄露敏感信息。

**检查日期**：请填写检查日期  
**仓库地址**：请填写您的 GitHub 仓库地址

---

## ✅ 必须检查的项目

### 1. 密钥库文件（Keystore Files）

#### 检查项：
- [ ] `*.keystore` 文件**没有**出现在 GitHub 仓库中
- [ ] `*.jks` 文件**没有**出现在 GitHub 仓库中
- [ ] `keystore.properties` 文件**没有**出现在 GitHub 仓库中

#### 如何检查：
1. 访问您的 GitHub 仓库页面
2. 在仓库中搜索以下文件名：
   - `phototimegrouper.keystore`
   - `keystore.properties`
   - 任何 `.keystore` 或 `.jks` 文件
3. 如果找到这些文件，**立即删除**（参见下面的"紧急处理"部分）

#### 预期结果：
✅ 这些文件**不应该**出现在 GitHub 仓库中

---

### 2. 密码和密钥

#### 检查项：
- [ ] 代码中**没有**硬编码的密码
- [ ] 代码中**没有**硬编码的 API 密钥
- [ ] 代码中**没有**硬编码的访问令牌

#### 如何检查：
在 GitHub 仓库中搜索以下关键词：
- `password`
- `api_key`
- `secret`
- `token`
- `keystore_password`
- `key_password`

#### 预期结果：
✅ 如果找到这些关键词，确认它们：
- 是占位符（如 `"your_password_here"`）
- 或从环境变量读取
- 或从配置文件读取（配置文件本身不在仓库中）

---

### 3. 个人信息

#### 检查项：
- [ ] 代码中**没有**真实的邮箱地址
- [ ] 代码中**没有**真实的电话号码
- [ ] 代码中**没有**真实的地址信息
- [ ] 代码中**没有**真实的姓名

#### 如何检查：
在 GitHub 仓库中搜索：
- 您的真实邮箱
- 您的真实电话
- 您的真实地址

#### 预期结果：
✅ 这些信息**不应该**出现在代码中

---

### 4. 构建输出文件

#### 检查项：
- [ ] `build/` 目录**没有**出现在仓库中
- [ ] `*.apk` 文件**没有**出现在仓库中
- [ ] `*.aab` 文件**没有**出现在仓库中
- [ ] `.gradle/` 目录**没有**出现在仓库中

#### 如何检查：
在 GitHub 仓库中检查是否有这些文件或目录

#### 预期结果：
✅ 这些文件/目录**不应该**出现在仓库中（应该被 `.gitignore` 排除）

---

### 5. 本地配置文件

#### 检查项：
- [ ] `local.properties` 文件**没有**出现在仓库中
- [ ] `.idea/` 目录中的敏感文件**没有**出现在仓库中

#### 如何检查：
在 GitHub 仓库中搜索这些文件

#### 预期结果：
✅ 这些文件**不应该**出现在仓库中

---

## 🔍 详细检查步骤

### 步骤 1：在 GitHub 上检查文件列表

1. 访问您的 GitHub 仓库
2. 查看仓库根目录的文件列表
3. 确认以下文件**存在**：
   - ✅ `.gitignore`
   - ✅ `README.md`
   - ✅ `build.gradle`
   - ✅ `app/build.gradle`
   - ✅ `settings.gradle`

4. 确认以下文件**不存在**：
   - ❌ `keystore.properties`
   - ❌ `*.keystore`
   - ❌ `local.properties`
   - ❌ `build/` 目录

### 步骤 2：使用 GitHub 搜索功能

1. 在仓库页面，使用搜索框（或按 `S` 键）
2. 搜索敏感关键词：
   - `keystore`
   - `password`
   - `secret`
   - `api_key`

3. 检查搜索结果，确认没有敏感信息

### 步骤 3：检查提交历史

1. 点击仓库的 "Commits"（提交）标签
2. 查看最近的提交
3. 点击每个提交，查看更改的文件
4. 确认没有敏感文件被提交

---

## 🚨 如果发现敏感文件被提交

### 紧急处理步骤

#### 情况 1：敏感文件刚刚提交，还没有推送到 GitHub

**解决方案**：
```bash
# 从 Git 中删除文件（但保留本地文件）
git rm --cached keystore.properties
git rm --cached *.keystore

# 提交删除操作
git commit -m "Remove sensitive files"

# 推送到 GitHub
git push
```

#### 情况 2：敏感文件已经推送到 GitHub

**⚠️ 重要**：如果敏感文件已经推送到 GitHub，需要立即处理：

1. **立即删除 GitHub 上的文件**：
   - 在 GitHub 仓库中找到敏感文件
   - 点击文件
   - 点击右上角的垃圾桶图标删除
   - 提交删除操作

2. **清理 Git 历史**（推荐）：
   ```bash
   # 使用 git-filter-repo（需要先安装）
   # 或使用 BFG Repo-Cleaner
   ```

3. **如果包含密钥库密码**：
   - ⚠️ **立即重新生成密钥库**
   - ⚠️ **更改所有相关密码**
   - ⚠️ **如果已发布应用，考虑重新签名**

4. **强制推送**（谨慎使用）：
   ```bash
   # 警告：这会重写历史，影响其他协作者
   git push --force
   ```

#### 情况 3：需要完全清理历史

如果敏感信息已经在多个提交中，可能需要：

1. **删除仓库并重新创建**（最简单）：
   - 在 GitHub 上删除仓库
   - 创建新仓库
   - 重新推送代码（确保敏感文件已排除）

2. **使用专业工具清理历史**：
   - `git-filter-repo`
   - `BFG Repo-Cleaner`

---

## ✅ 安全检查清单总结

完成以下所有检查后，您的仓库应该是安全的：

- [ ] ✅ 密钥库文件（`*.keystore`, `*.jks`）不在仓库中
- [ ] ✅ `keystore.properties` 不在仓库中
- [ ] ✅ 没有硬编码的密码
- [ ] ✅ 没有硬编码的 API 密钥
- [ ] ✅ 没有个人信息（邮箱、电话、地址）
- [ ] ✅ 构建输出文件（`build/`, `*.apk`）不在仓库中
- [ ] ✅ 本地配置文件（`local.properties`）不在仓库中
- [ ] ✅ `.gitignore` 文件已正确配置
- [ ] ✅ 提交历史中没有敏感信息

---

## 📝 检查记录

**检查日期**：_________________  
**检查人**：_________________  
**仓库地址**：_________________  

**检查结果**：
- [ ] 所有检查项通过
- [ ] 发现问题，已处理（见下方说明）

**问题说明**（如有）：
_________________________________________________
_________________________________________________

**处理措施**：
_________________________________________________
_________________________________________________

---

## 🔗 相关文档

- [GitHub项目创建和上传指南.md](./GitHub项目创建和上传指南.md)
- [签名配置说明.md](./签名配置说明.md)

---

**文档版本**：1.0  
**最后更新**：2024年

**安全第一！请务必完成所有检查！** 🔒
