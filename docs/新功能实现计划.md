# 新功能实现计划

## 功能需求

### 1. 每天分组相片的查看方式提供更多选择
- 小图模式（当前横向滚动）
- 大图模式
- 详情列表模式（名称、时间、大小等字段）

### 2. 图片详情信息扩展
- 照片来源
- 分辨率大小
- 文件大小
- 感光度（ISO）
- 照片格式

## 实现状态

### ✅ 已完成

1. **扩展 PhotoItem 数据结构**
   - 添加 size（文件大小）
   - 添加 width、height（分辨率）
   - 添加 mimeType（照片格式）
   - 添加 bucketDisplayName（来源/文件夹）
   - 添加 data（文件路径）
   - 添加 iso（感光度）
   - 添加辅助方法：getFormattedSize()、getResolution()、getFormat()

2. **创建 PhotoMetadataLoader 工具类**
   - loadIso() - 从 Exif 读取 ISO
   - loadExifInfo() - 读取更多 Exif 信息（焦距、光圈、曝光时间等）

3. **更新 MediaStore 查询**
   - 添加 SIZE、WIDTH、HEIGHT、MIME_TYPE、BUCKET_DISPLAY_NAME、DATA 字段
   - 在 loadPhotosFromMediaStore() 中加载这些字段

4. **添加依赖**
   - androidx.exifinterface:exifinterface:1.3.6

### 🚧 待实现

1. **扩展详情页信息显示**（PhotoDetailActivity）
   - 更新布局文件，添加更多信息显示区域
   - 在 updatePhotoInfo() 中显示：来源、分辨率、文件大小、格式
   - 可选：异步加载 ISO（因为 Exif 读取可能较慢）

2. **实现查看模式切换**
   - 在 PhotoGroupAdapter 中添加模式切换器（底部按钮或菜单）
   - 定义 ViewMode 枚举（SMALL_GRID、LARGE_GRID、DETAIL_LIST）
   - 根据模式切换不同的 LayoutManager 和 Adapter

3. **实现三种查看模式**
   - **小图模式**：当前横向滚动（GridLayoutManager，spanCount=3）
   - **大图模式**：更大的网格（GridLayoutManager，spanCount=2）
   - **详情列表模式**：垂直列表，显示名称、时间、大小等信息

## 下一步实现

由于功能较大，建议分阶段实现：

### 阶段 1：详情页信息扩展（优先）
- 更新 activity_photo_detail.xml 布局
- 扩展 updatePhotoInfo() 方法
- 显示所有可用的元数据

### 阶段 2：查看模式切换
- 添加模式切换 UI（底部按钮或菜单）
- 实现模式状态管理
- 实现三种不同的适配器或布局

---

**创建时间**：2024
**当前状态**：数据结构扩展完成，详情页和查看模式待实现
