# 快速运行测试指南

## 🎯 推荐方法：在 Android Studio 中直接运行测试

当 `connectedDebugAndroidTest` 任务显示 "0 tests" 或失败时，最可靠的方法是在 Android Studio 中直接运行测试。

### 步骤：

#### 1. 运行单个测试类

1. **打开测试文件**
   - 在项目视图中找到：`app/src/androidTest/java/com/example/phototimegrouper/PhotoItemInstrumentedTest.kt`
   - 双击打开文件

2. **找到运行按钮**
   - 在类名 `class PhotoItemInstrumentedTest` 左侧
   - 你会看到绿色播放图标 ▶️

3. **运行测试**
   - 点击绿色播放图标
   - 选择 `Run 'PhotoItemInstrumentedTest'`
   - 或者右键点击类名 → `Run 'PhotoItemInstrumentedTest'`

4. **查看结果**
   - 测试结果会显示在底部的 `Run` 面板
   - ✅ 绿色 = 通过
   - ❌ 红色 = 失败（会显示详细错误信息）

#### 2. 运行单个测试方法

1. **打开测试文件**
2. **找到测试方法**（例如 `testPhotoItemParcelableWriteAndRead()`）
3. **点击方法名左侧的绿色播放图标** ▶️
4. **选择 `Run 'testPhotoItemParcelableWriteAndRead()'`**

#### 3. 运行所有测试类

1. **在项目视图中**
   - 导航到 `app/src/androidTest/java/com/example/phototimegrouper/`
   - 右键点击 `phototimegrouper` 包（文件夹）
   - 查看是否有 `Run 'Tests in 'phototimegrouper''` 选项
   - 如果有，点击它

### ✅ 优点

- 可以看到详细的错误信息
- 测试结果实时显示
- 可以单独运行失败的测试
- 更可靠，不依赖 Gradle 任务

### 📝 测试文件列表

当前项目有以下测试文件：

1. `PhotoItemInstrumentedTest.kt` - PhotoItem Parcelable 测试
2. `MainActivityTest.kt` - MainActivity UI 测试
3. `PhotoDetailActivityTest.kt` - PhotoDetailActivity UI 测试
4. `PhotoLoadingIntegrationTest.kt` - 照片加载集成测试
5. `PhotoNavigationIntegrationTest.kt` - 照片导航集成测试
6. `PhotoDataFlowIntegrationTest.kt` - 数据流集成测试

### 🔧 如果看不到运行按钮

1. **确保项目已同步**
   - `File → Sync Project with Gradle Files`
   - 等待同步完成

2. **检查设备连接**
   - 确保 Android 设备已连接
   - 在 Android Studio 底部状态栏可以看到设备信息
   - 或者启动 Android 模拟器

3. **清理并重建**
   - `Build → Clean Project`
   - `Build → Rebuild Project`
   - 再次尝试运行测试

### ❓ 如果测试运行但失败

测试失败时，Android Studio 会显示详细的错误信息：

1. **查看错误信息**
   - 在 `Run` 面板中查看红色错误信息
   - 点击错误可以跳转到相关代码

2. **常见问题**
   - **权限问题**：某些测试需要权限，确保设备已授予权限
   - **设备问题**：确保设备 API 级别符合要求
   - **依赖问题**：确保所有依赖已正确下载

3. **获取帮助**
   - 复制完整的错误信息
   - 包括堆栈跟踪
   - 查找相关文档或寻求帮助
