# è§£å†³æµ‹è¯•è¿è¡ŒæŒ‰é’®ä¸æ˜¾ç¤ºé—®é¢˜

å¦‚æœ Android Studio ä¸­çœ‹ä¸åˆ°æµ‹è¯•è¿è¡ŒæŒ‰é’®ï¼ˆç»¿è‰²è¿è¡Œå›¾æ ‡ â–¶ï¸ï¼‰ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹è§£å†³æ–¹æ³•ã€‚

## ğŸ” é—®é¢˜æ’æŸ¥æ­¥éª¤

### æ­¥éª¤ 1: åŒæ­¥é¡¹ç›®ï¼ˆæœ€é‡è¦ï¼‰

1. **åŒæ­¥ Gradle é¡¹ç›®**
   - `File â†’ Sync Project with Gradle Files`
   - æˆ–ç‚¹å‡»é¡¶éƒ¨å·¥å…·æ çš„ "Sync Project with Gradle Files" å›¾æ ‡ ğŸ”„
   - **ç­‰å¾…åŒæ­¥å®Œæˆ**ï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰

2. **éªŒè¯åŒæ­¥æˆåŠŸ**
   - æŸ¥çœ‹ `Build` é¢æ¿æ˜¯å¦æœ‰é”™è¯¯
   - å¦‚æœæœ‰é”™è¯¯ï¼Œå…ˆä¿®å¤é”™è¯¯
   - åº•éƒ¨çŠ¶æ€æ åº”è¯¥æ˜¾ç¤º "Gradle sync finished"

### æ­¥éª¤ 2: é‡æ–°æ„å»ºé¡¹ç›®

1. **æ¸…ç†å¹¶é‡æ–°æ„å»º**
   - `Build â†’ Clean Project`
   - ç­‰å¾…æ¸…ç†å®Œæˆ
   - `Build â†’ Rebuild Project`
   - ç­‰å¾…æ„å»ºå®Œæˆ

### æ­¥éª¤ 3: ä½¿ç¼“å­˜å¤±æ•ˆå¹¶é‡å¯

1. **ä½¿ç¼“å­˜å¤±æ•ˆ**
   - `File â†’ Invalidate Caches...`
   - é€‰æ‹© `Invalidate and Restart`
   - ç­‰å¾… Android Studio é‡å¯

### æ­¥éª¤ 4: æ£€æŸ¥æµ‹è¯•æ–‡ä»¶

ç¡®ä¿æµ‹è¯•æ–‡ä»¶æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

1. **æ–‡ä»¶ä½ç½®æ­£ç¡®**
   - å•å…ƒæµ‹è¯•ï¼š`app/src/test/java/com/example/phototimegrouper/`
   - é›†æˆæµ‹è¯•ï¼š`app/src/androidTest/java/com/example/phototimegrouper/`

2. **æµ‹è¯•ç±»æ ¼å¼æ­£ç¡®**
   ```kotlin
   @RunWith(AndroidJUnit4::class)  // å¯¹äº androidTest
   // æˆ– @RunWith(JUnit4::class)   // å¯¹äº testï¼ˆå¯é€‰ï¼‰
   class YourTestClass {
       @Test
       fun testMethod() {
           // æµ‹è¯•ä»£ç 
       }
   }
   ```

3. **å¿…è¦çš„æ³¨è§£**
   - `@Test` - æ ‡è®°æµ‹è¯•æ–¹æ³•
   - `@RunWith(AndroidJUnit4::class)` - å¯¹äº Instrumented æµ‹è¯•

### æ­¥éª¤ 5: æ£€æŸ¥ Gradle é…ç½®

ç¡®ä¿ `app/build.gradle` ä¸­æœ‰ä»¥ä¸‹é…ç½®ï¼š

```gradle
android {
    defaultConfig {
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }
}

dependencies {
    // Android test dependencies
    androidTestImplementation 'androidx.test.ext:junit:1.1.5'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'
    // ... å…¶ä»–æµ‹è¯•ä¾èµ–
}
```

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### è§£å†³æ–¹æ¡ˆ 1: å¼ºåˆ¶é‡æ–°ç´¢å¼•ï¼ˆæ¨èï¼‰

1. **å…³é—­é¡¹ç›®**
   - `File â†’ Close Project`

2. **é‡æ–°æ‰“å¼€é¡¹ç›®**
   - é€‰æ‹©é¡¹ç›®
   - ç­‰å¾… Android Studio é‡æ–°ç´¢å¼•

3. **ç­‰å¾…ç´¢å¼•å®Œæˆ**
   - å³ä¸‹è§’ä¼šæ˜¾ç¤ºç´¢å¼•è¿›åº¦
   - ç­‰å¾…ç´¢å¼•å®Œæˆï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿï¼‰

### è§£å†³æ–¹æ¡ˆ 2: æ‰‹åŠ¨åˆ›å»ºè¿è¡Œé…ç½®

å¦‚æœä»ç„¶çœ‹ä¸åˆ°è¿è¡ŒæŒ‰é’®ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºè¿è¡Œé…ç½®ï¼š

1. **åˆ›å»ºè¿è¡Œé…ç½®**
   - `Run â†’ Edit Configurations...`
   - ç‚¹å‡» `+` â†’ é€‰æ‹© `Android Instrumented Tests`

2. **é…ç½®å‚æ•°**
   - **Name**: `All Integration Tests`
   - **Module**: é€‰æ‹© `app`
   - **Test**: é€‰æ‹© `All in Package`
   - **Package**: `com.example.phototimegrouper`
   - **Target**: é€‰æ‹© `Show device chooser dialog`

3. **ä¿å­˜å¹¶è¿è¡Œ**
   - ç‚¹å‡» `OK`
   - ä»è¿è¡Œé…ç½®ä¸‹æ‹‰èœå•é€‰æ‹©æ–°é…ç½®
   - ç‚¹å‡»è¿è¡Œ â–¶ï¸

### è§£å†³æ–¹æ¡ˆ 3: ä½¿ç”¨ Gradle å‘½ä»¤è¿è¡Œ

å¦‚æœ Android Studio ä¸­æ— æ³•è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œï¼š

```bash
# åœ¨ Android Studio çš„ Terminal ä¸­è¿è¡Œ

# è¿è¡Œæ‰€æœ‰é›†æˆæµ‹è¯•
./gradlew connectedAndroidTest

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
./gradlew connectedAndroidTest --tests "com.example.phototimegrouper.PhotoLoadingIntegrationTest"

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–¹æ³•
./gradlew connectedAndroidTest --tests "com.example.phototimegrouper.PhotoLoadingIntegrationTest.testCompletePhotoLoadingFlow"
```

### è§£å†³æ–¹æ¡ˆ 4: æ£€æŸ¥ Android Studio ç‰ˆæœ¬

1. **æ£€æŸ¥ç‰ˆæœ¬**
   - `Help â†’ About`
   - æ¨èä½¿ç”¨ Android Studio Hedgehog (2023.1.1) æˆ–æ›´æ–°ç‰ˆæœ¬

2. **æ›´æ–° Android Studio**
   - `Help â†’ Check for Updates`
   - å¦‚æœæœ‰æ›´æ–°ï¼Œå»ºè®®æ›´æ–°

### è§£å†³æ–¹æ¡ˆ 5: é‡æ–°å¯¼å…¥é¡¹ç›®

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½ä¸è¡Œï¼Œå¯ä»¥å°è¯•é‡æ–°å¯¼å…¥ï¼š

1. **å…³é—­é¡¹ç›®**
2. **åˆ é™¤ .idea æ–‡ä»¶å¤¹**ï¼ˆå¤‡ä»½é‡è¦è®¾ç½®ï¼‰
3. **é‡æ–°æ‰“å¼€é¡¹ç›®**
4. **ç­‰å¾…é‡æ–°ç´¢å¼•**

**âš ï¸ æ³¨æ„**: åˆ é™¤ `.idea` æ–‡ä»¶å¤¹ä¼šä¸¢å¤±é¡¹ç›®ç‰¹å®šçš„ IDE è®¾ç½®ã€‚

## âœ… éªŒè¯æµ‹è¯•æ–‡ä»¶æ˜¯å¦æ­£ç¡®

æ‰“å¼€ `PhotoLoadingIntegrationTest.kt`ï¼Œæ£€æŸ¥ï¼š

1. **ç±»å£°æ˜**
   ```kotlin
   @RunWith(AndroidJUnit4::class)
   @LargeTest
   class PhotoLoadingIntegrationTest {
   ```
   åº”è¯¥çœ‹åˆ°ç±»åå·¦ä¾§æœ‰è¿è¡Œå›¾æ ‡ â–¶ï¸

2. **æµ‹è¯•æ–¹æ³•**
   ```kotlin
   @Test
   fun testCompletePhotoLoadingFlow() {
   ```
   åº”è¯¥çœ‹åˆ°æ–¹æ³•åå·¦ä¾§æœ‰è¿è¡Œå›¾æ ‡ â–¶ï¸

## ğŸ“‹ æ£€æŸ¥æ¸…å•

è¿è¡Œæµ‹è¯•å‰ï¼Œç¡®ä¿ï¼š

- [ ] é¡¹ç›®å·²æˆåŠŸåŒæ­¥ï¼ˆ`File â†’ Sync Project with Gradle Files`ï¼‰
- [ ] æ²¡æœ‰æ„å»ºé”™è¯¯ï¼ˆæ£€æŸ¥ `Build` é¢æ¿ï¼‰
- [ ] æµ‹è¯•æ–‡ä»¶åœ¨æ­£ç¡®çš„ä½ç½®ï¼ˆ`androidTest` ç›®å½•ï¼‰
- [ ] æµ‹è¯•ç±»æœ‰ `@RunWith(AndroidJUnit4::class)` æ³¨è§£
- [ ] æµ‹è¯•æ–¹æ³•æœ‰ `@Test` æ³¨è§£
- [ ] è®¾å¤‡/æ¨¡æ‹Ÿå™¨å·²è¿æ¥ï¼ˆå¯¹äº Instrumented æµ‹è¯•ï¼‰
- [ ] Android Studio ç‰ˆæœ¬æ˜¯æœ€æ–°çš„æˆ–è¾ƒæ–°çš„ç‰ˆæœ¬

## ğŸ¯ æœ€å¿«çš„è§£å†³æ–¹æ¡ˆ

**æ¨èé¡ºåº**ï¼š

1. **åŒæ­¥é¡¹ç›®** (`File â†’ Sync Project with Gradle Files`)
   - ç­‰å¾…å®Œæˆ
   
2. **ä½¿ç¼“å­˜å¤±æ•ˆå¹¶é‡å¯** (`File â†’ Invalidate Caches... â†’ Invalidate and Restart`)
   - ç­‰å¾…é‡å¯å®Œæˆ
   
3. **é‡æ–°æ‰“å¼€æµ‹è¯•æ–‡ä»¶**
   - æ‰“å¼€ `PhotoLoadingIntegrationTest.kt`
   - æ£€æŸ¥ç±»åå’Œæ–¹æ³•åå·¦ä¾§æ˜¯å¦æœ‰è¿è¡Œå›¾æ ‡

4. **å¦‚æœè¿˜æ˜¯æ²¡æœ‰**ï¼Œä½¿ç”¨ Gradle å‘½ä»¤ï¼š
   ```bash
   ./gradlew connectedAndroidTest
   ```

## ğŸ’¡ ä¸´æ—¶è§£å†³æ–¹æ¡ˆ

å¦‚æœæ€¥éœ€è¿è¡Œæµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨ï¼š

1. **Gradle é¢æ¿**
   - å³ä¾§è¾¹æ  â†’ Gradle
   - `app â†’ Tasks â†’ verification â†’ connectedAndroidTest`
   - åŒå‡»è¿è¡Œ

2. **å‘½ä»¤è¡Œ**
   - Android Studio Terminal
   - `./gradlew connectedAndroidTest`

3. **æ‰‹åŠ¨è¿è¡Œé…ç½®**
   - `Run â†’ Edit Configurations...`
   - åˆ›å»º Android Instrumented Tests é…ç½®

---

**å¦‚æœæ‰€æœ‰æ–¹æ³•éƒ½ä¸è¡Œ**ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ä»¥ä¾¿è¿›ä¸€æ­¥æ’æŸ¥ï¼š
- Android Studio ç‰ˆæœ¬
- é¡¹ç›®åŒæ­¥æ˜¯å¦æœ‰é”™è¯¯
- Build é¢æ¿çš„é”™è¯¯ä¿¡æ¯
- æµ‹è¯•æ–‡ä»¶çš„å…·ä½“è·¯å¾„
